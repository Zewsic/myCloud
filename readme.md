# Документация по модулу `CustomTGClient`

Данная документация показывает состав модуля `CustomTGClient`, в том числе его методы и примеры использования.

## Класс `CustomClientManager`

Данный класс предназначен для управления телеграм-клиентами. Он содержит функции для авторизации всех клиентов, получения следующего клиента по кольцевому принципу, учет количества запросов к аккаунту, и запуск тех самых запросов.

### Методы

Ниже представлено описание работы методов. Более подробное описание аргументов, возвратов и возможных ошибок вы можете прочитать в описании каждого метода в файле с кодом.

1. `auth_all_clients` - Авторизует всех клиентов из базы данных. Выводит на экран результат авторизации для каждого аккаунта.
2. `check_and_reset_all_counts` - Сбрасывает стетчик запросов в случае, если с момента прошлого сброса прошло более чем 24 часа.
3. `get_next_account` - Возвращает следующий работоспособный аккаунт по кольцевому принципу.
4. `make_request` - делает запрос. Перед запросом проверяет необходимость сброса счетчиков запроса, после чего получает аккаунт через функцию `get_next_account`, отправляет сообщение в чат, ждет необюходимое время, ищет следующее сообщение по ключевому слову, отмечает его как прочитанное и возвращает его.

### Примеры использования

В зависимости от задач, модуль можно использовать по разному. Ниже представлен один из примеров использования.

```python
from CustomTGClient import CustomTGClientManager

Manager = CustomTGClientManager()
Manager.auth_all_clients()

for _ in range(4):
    msg = Manager.make_request("example_username", "/get_me", "You is", 5)
    print("Persion is " + msg.text.split(" ")[2])
```

В данном примере мы авторизуем все аккаунты и делаем 4 запроса. Запросы делюатся аккаунтами по кольцевому принципу.
В каждом запросе мы пишем команду `get_me` в чат `example_username` и ожидаем ответ со словами `You is` в течении 5 секунд. Если ответа не будет, программа вылетет с ошибкой.
После получения ответа мы выводим строку `Person is` вместе с тем, что идет после ключевых слов.

### Дополнительно

Вы также можете быстро добавлять аккаунты телеграм, вызвав данный класс из командной строки
```bash
python3 CustomTGClient/__init__.py
```

В данном случае вы будете добавлять аккаунты телеграм, пока не нажмете клавишу `enter` на этапе ввода номера телефона.